<!DOCTYPE html>
<html>
<head>
    <title>Save The Children</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="/images/stc-logo.png" alt="Save The Children">
        </div>

        <nav>
            <a href="/"><i class='fa fa-home'></i> Home</a>
            <a href="/events"><i class='fa fa-file-text'></i> Events</a>
            <a href="/search"><i class='fa fa-search'></i> Search</a>
            <a href="/admin"><i class='fa fa-user-shield'></i> Admin</a>
        </nav>
    </header>

    <div class="hero">
        <img src="/images/savethechildren2.png" alt="Save The Children">
        <h1>Protect Children, Change Lives</h1>
        <p>Join us to support education, health, and safety for children worldwide.</p>
    </div>

    <section id="upcoming-events">
        <h2>Available & Upcoming Events</h2>
        <div id="eventsContainer"></div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", () => loadEvents());

        function loadEvents() {
            fetch("http://localhost:3060/api/events")
                .then(res => res.json())
                .then(events => {
                    const container = document.getElementById('eventsContainer');
                    container.innerHTML = "";

                    events.forEach(event => {
                        const div = document.createElement("div");
                        div.classList.add("event");
                        div.dataset.id = event.id;

                        div.innerHTML = `
                            <img src="http://localhost:3060${event.image}" alt="${event.name}" onclick="goToEvent(${event.id})">
                            <h2 onclick="goToEvent(${event.id})">${event.name}</h2>
                            <p><strong>Location:</strong> <span class="location">${event.location}</span></p>
                            <p><strong>Date:</strong> <span class="date">${event.date}</span></p>
                            <p><strong>Time:</strong> <span class="time">${event.time}</span></p>
                            <p><strong>Description:</strong> <span class="description">${event.description}</span></p>
                            <p><strong>Status:</strong> <span class="status-text">${event.status}</span></p>
                        `;
                        container.appendChild(div);
                    });
                })
                .catch(err => {
                    console.error("Error loading events:", err);
                    alert("Failed to load events");
                });
        }

        function goToEvent(id) {
            window.location.href = `/event-detail?id=${id}`;
        }
    </script>
</body>
</html>